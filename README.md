<h1 align=center>üåü–ü—Ä–æ–µ–∫—Ç Foodgram - –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫üåü</h1>

## üìÑ **–û–ø–∏—Å–∞–Ω–∏–µ**

Foodgram - –≤–µ–±—Å–∞–π—Ç —Å —Ä–µ—Ü–µ–ø—Ç–∞–º–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –°–æ–∑–¥–∞–≤–∞—Ç—å, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –±–ª—é–¥.
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –∏ –¥–æ–±–∞–≤–ª—è—Ç—å, —É–¥–∞–ª—è—Ç—å –∏—Ö –∏–∑ —Å–ø–∏—Å–æ–∫–∞ –∏–∑–±—Ä–∞–Ω—ã—Ö.
- –î–æ–±–∞–≤–ª—è—Ç—å, –∏ —É–¥–∞–ª—è—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã —Å–≤–æ–∏ –∏ —á—É–∂–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã, –∏ —Å–∫–∞—á–∞–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –∏—Ö –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è.
- –î–æ–±–∞–≤–ª—è—Ç—å –∞–≤—Ç–æ—Ä–æ–≤ –≤ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã –∞–≤—Ç–æ—Ä–∞ –Ω–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–¥–ø–∏—Å–∞–ª–∏—Å—å.
  
<br>
<br>

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
___
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä.

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```
git clone git@github.com:vglazasmotri/foodgram-project-react.git
```

```
cd foodgram-project-react
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ü—Ä–∏–º–µ—Ä –≤ —Ñ–∞–π–ª–µ .env.example:

```
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
POSTGRES_DB=foodgram
POSTGRES_USER=foodgram_user
POSTGRES_PASSWORD=foodgram_password
DB_NAME=foodgram
# –¥–ª—è Django-–ø—Ä–æ–µ–∫—Ç–∞:
DB_HOST=db
DB_PORT=5432
SECRET_KEY=secret_key
ALLOWED_HOSTS="***.*.*.*,127.0.0.1,localhost,you_domen"
DEBUG=False
# –¥–ª—è Docker:
BACKEND_PORT=8000
HTTP_PORT=80
DOCKER_USERNAME=dockerhub_username
APPLICATION_NAME=foodgram
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç Make:

–ï—Å–ª–∏ —É –≤–∞—Å Windows.
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ chocolatey package manager
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ make:
```
choco install make
```
–ï—Å–ª–∏ —É –≤–∞—Å Linux —Ç–æ make –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π:
```
sudo apt install make
```

–°–æ–∑–¥–∞–Ω–∏–µ Docker-–æ–±—Ä–∞–∑–æ–≤ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤–∞—à DockerHub —Å –ø–æ–º–æ—â—å—é Makefile:

```
cd frontend
make build push
```

```
cd ../backend
make build push
```

–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```
cd ../infra
docker compose -f docker-compose.production.yml up
```

–°–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏–∫—É, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É migrate –≤ Windows –ª—É—á—à–µ —á–µ—Ä–µ–∑ PowerShell:

```
docker compose -f docker-compose.production.yml exec backend python manage.py collectstatic
```

```
docker compose -f docker-compose.production.yml exec backend cp -r /app/collected_static/. /backend_static/
```
```
docker compose -f docker-compose.production.yml exec backend python manage.py makemigrations
```
```
docker compose -f docker-compose.production.yml exec backend python manage.py migrate
```

–ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ

```
http://localhost:8000/
```

___
### –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É

```
ssh -i –ø—É—Ç—å_–¥–æ_—Ñ–∞–π–ª–∞_—Å_SSH_–∫–ª—é—á–æ–º/–Ω–∞–∑–≤–∞–Ω–∏–µ_—Ñ–∞–π–ª–∞_—Å_SSH_–∫–ª—é—á–æ–º –∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è@ip_–∞–¥—Ä–µ—Å_—Å–µ—Ä–≤–µ—Ä–∞ 
```

–°–æ–∑–¥–∞–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é foodgram —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª:

```
mkdir foodgram
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ docker compose –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```
sudo apt update
sudo apt install curl
curl -fSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
sudo apt-get install docker-compose-plugin
```

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é foodgram/ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–∞–ø–∫–∏ infra: docker-compose.production.yml, nginx.conf –∏ .env:

```
scp -i path_to_SSH/SSH_name docker-compose.production.yml username@server_ip:/home/username/foodgram/docker-compose.production.yml
```
* ath_to_SSH ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å SSH-–∫–ª—é—á–æ–º;
* SSH_name ‚Äî –∏–º—è —Ñ–∞–π–ª–∞ —Å SSH-–∫–ª—é—á–æ–º (–±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è);
* username ‚Äî –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ;
* server_ip ‚Äî IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –ø–æ–º–æ—â—å—é —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä nano –∏ —Å–∫–æ–ø—Ä—É–π—Ç–µ –≤ –Ω–∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ docker compose –≤ —Ä–µ–∂–∏–º–µ –¥–µ–º–æ–Ω–∞:

```
sudo docker compose -f docker-compose.production.yml up -d
```

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –±—ç–∫–µ–Ω–¥–∞ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –≤ /backend_static/:

```
sudo docker compose -f docker-compose.production.yml exec backend python manage.py makemigrations
```

```
sudo docker compose -f docker-compose.production.yml exec backend python manage.py migrate
```

```
sudo docker compose -f docker-compose.production.yml exec backend python manage.py collectstatic
```

```
sudo docker compose -f docker-compose.production.yml exec backend cp -r /app/collected_static/. /backend_static/
```

–°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
sudo docker compose -f docker-compose.production.yml exec backend python manage.py createsuperuser
```

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏ —Å–ø–∏—Å–æ–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ –±–¥


```
sudo docker compose -f docker-compose.production.yml exec backend python manage.py ingredients_from_data ingredients.csv
```

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ nano –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ Nginx:

```
sudo nano /etc/nginx/sites-enabled/default
```

–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ location –≤ —Å–µ–∫—Ü–∏–∏ server:

```
location / {
    proxy_set_header Host $http_host;
    proxy_pass http://127.0.0.1:8000;
}
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥–∞ Nginx:

```
sudo nginx -t
```

–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ç–∞–∫–æ–π, –∑–Ω–∞—á–∏—Ç, –æ—à–∏–±–æ–∫ –Ω–µ—Ç:
```
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx

```
sudo service nginx reload
```

–ì–æ—Ç–æ–≤–æ!


<br>
<br>

## üéûÔ∏è –ü—Ä–∏–º–µ—Ä—ã

[–î—ç–º–æ –ø—Ä–æ–µ–∫—Ç–∞](http://foodgramm.ru/recipes)

## üõ†Ô∏è –ü—Ä–∏–º–µ–Ω—è–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54) ![DjangoREST](https://img.shields.io/badge/DJANGO-REST-ff1709?style=for-the-badge&logo=django&logoColor=white&color=ff1709&labelColor=blue) ![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E) ![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB) ![Ubuntu](https://img.shields.io/badge/Ubuntu-E95420?style=for-the-badge&logo=ubuntu&logoColor=white) ![Gunicorn](https://img.shields.io/badge/gunicorn-%298729.svg?style=for-the-badge&logo=gunicorn&logoColor=white) ![Nginx](https://img.shields.io/badge/nginx-%23009639.svg?style=for-the-badge&logo=nginx&logoColor=white)
- Python 3.7
- Django 3.2
- Django Rest Framework 3.12.4


## üí™ –ê–≤—Ç–æ—Ä:

- –°–µ—Ä–≥–µ–π –°—ã—á Python-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (https://github.com/vglazasmotri)
